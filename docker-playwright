FROM mcr.microsoft.com/playwright:v1.41.0

WORKDIR /app
COPY package.json package-lock.json ./
RUN npm ci
COPY . .
RUN npx playwright install --with-deps

# Set environment variable to tell tests where to find the app
ENV APP_URL=http://app:3000

CMD ["npx", "playwright", "test"]